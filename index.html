<html>
    <head>
    
        <title>jquery.easie.js</title>
        
        <style type="text/css">
            html, body {
                font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
                color:white;
		    }
            
            html {
                background-color: #191919;
                min-height:100%;
		    }
            
            li {
                margin-top:6px;
            }
            
	        section {
	            width:600px;
	            margin-bottom:0px;
	            margin-top:80px;
	            margin-left:auto;
	            margin-right:auto;
	            padding:40px;
		        background-color: #444;
		        opacity:0.0;
		        -webkit-border-radius:4px;
		    }
		    
		    h1 {
		        margin-top:-15px;
		        font-weight:300;
		        font-size:50px;
		        letter-spacing:1px;
		        text-shadow: 0px -1px -1px #999;
            }
		    
		    #graph {
		        margin-top:40px;
		        padding:10px;
		        background-color: #666;
		        width:200px;
		        height:200px;
		        -webkit-border-radius:3px;
		    }
		    
		    #easingSelector {
		        width:200px;
                height:10px;
		    }
		    
		    .code {
		         color: #268bd2;
		         font-size:12px;
		         margin-top:10px;
		    }
		    
		    .codeBox {
		        float: right;
		        width:340px;
		        clear:both;
		        margin-right:0px;
		    }
        </style>
        
        <script type="text/javascript" src="lib/jquery-1.5.2.js"></script>
        <script type="text/javascript" src="lib/raphael-min.js"></script>
        <script type="text/javascript" src="js/jquery.easie.js"></script>
        
        <script type="text/javascript">
            
            $(document).ready(function() {
                $("section").animate({"opacity":1.0},1500,"easieEaseIn");
                
                showGraph("easieEaseInOut");
            });
            
            function showGraph(easingName) {
                var h = 200;
                var w = 200;
                var p = 10;
                
                $list = $("#easingSelector");
                $.each($.easing,function(key) {
                    if(key.indexOf("easie")!=-1) {
                        $('<option>'+key+'<'+'/option>').appendTo($list);
                    }
                });
                $('<option value="custom" disabled="true">'+'(custom easing)'+'<'+'/option>').appendTo($list);
                
                $list.change(function(val) {
                    var easingVal = $(this).val();
                    func = $.easing[easingVal];
                    if(!func) return;
                    params = func.params.slice(0);
                    pathelem.attr({path:makePath(func)});
                    controls[0].update(p+fullw*params[0], h-p-fullh*params[1]);
                    controls[1].update(p+fullw*params[2], h-p-fullh*params[3]);
                });
                
                
                var r = Raphael("graph", w, h);
                
                var func = $.easing[easingName];
                var params = func.params.slice(0);
                
                var fullh = (h-2*p);
                var fullw = (w-2*p);
                
                function makePath(funcIn) {
                    var count = 100;
                    var lineDesc = "M"+p+" "+(h-p);
                    for(var i=0;i<(count+1);i++) {
                        var x = i/count;
                        var y = funcIn(x,1,0,1);
                        lineDesc += "L"+(p+fullw*x)+" "+(h-p-fullh*y);
                    }
                    return lineDesc;
                }
                
                var endattr = {fill: "#ffffff", stroke: "none"};
                var selectattr = {fill: "#cb4b16", stroke: "none"};
                var lineattr = {stroke:"#333","stroke-dasharray": ".","stroke-width":2,"stroke-linecap":"round"};
                
                var c1 = [p, h-p];
                var c2 = [w-p, p];
                
                r.circle(c1[0],c1[1], 5).attr(endattr),
                r.circle(c2[0],c2[1], 5).attr(endattr)
                
                var p1 = [p+fullw*params[0], h-p-fullh*params[1]];
                var p2 = [p+fullw*params[2], h-p-fullh*params[3]];
                
                var path1 = [["M",c1[0],c1[1]],["L",p1[0],p1[1]]];
                var path2 = [["M",c2[0],c2[1]],["L",p2[0],p2[1]]];
                
                var lines = r.set(
                    r.path(path1).attr(lineattr),
                    r.path(path2).attr(lineattr)
                );
                
                var pathelem = r.path(makePath(func)).attr({stroke:"white","stroke-width":5,"stroke-linecap":"round"});
                
                var controls = r.set(
                    r.circle(p1[0], p1[1], 6).attr(selectattr),
                    r.circle(p2[0], p2[1], 6).attr(selectattr)
                );
                
                var updateValues = function(pos,xval,yval) {
                    // set precision
                    xval = Math.round(xval*1000)/1000;
                    yval = Math.round(yval*1000)/1000;
                       
                    if(pos===0) {
                        params[0] = xval;
                        params[1] = yval;
                    } else if(pos===1) {
                        params[2] = xval;
                        params[3] = yval;
                    }
                    
                    var name = $.easie(params[0],params[1],params[2],params[3],"tmpDemoEasing",true);
                    func = $.easing[name];
                    pathelem.attr({path:makePath(func)});
                    
                    var match;
                    $.each($.easing,function(key) {
                       if(key.indexOf("easie")!=-1) {
                           var ps = $.easing[key].params;
                           if(ps[0]===params[0] && ps[1] === params[1] && ps[2] === params[2] && ps[3] === params[3]) {
                               match = key;
                           }
                       }
                    });
                    if(!match) match = "custom";
                    $list.val(match);
                    
                    var cssContent = "";
                    var cssPrefix1 = "-webkit-transition-timing-function: <br/>&nbsp;&nbsp;&nbsp;&nbsp;";
                    var cssPrefix2 = "-moz-transition-timing-function: <br/>&nbsp;&nbsp;&nbsp;&nbsp;";
                    
                    var textContent = "$(\"#box\").animate({top:100}, ";
                    
                    var unCamelCase = function(text) {
                        return text.replace("easie","").replace(/([A-Z])/g,"-$1").toLowerCase().substr(1);
                    }
                    
                    if(match === "custom") {
                        textContent += "$.easie("+params.join(",");
                        cssContent += "cubic-bezier("+params.join(",")+")";
                    } else {
                        textContent += "\""+match+"\"";
                        if($.inArray(match,["easieEase","easieEaseIn","easieEaseOut","easieEaseInOut","easieLinear"]) != -1) {
                            cssContent += unCamelCase(match);
                        } else {
                            cssContent += "cubic-bezier("+params.join(",")+")";
                        }
                    }
                    textContent += ");";
                    cssContent += ";";
                    
                    $("#easieCode").html(textContent);
                    $("#cssCode").html(cssPrefix1+cssContent+"<br />"+cssPrefix2+cssContent);
                }
                
                updateValues();
                
                controls[0].update = function(ncx,ncy) {
                    this.attr({cx:ncx, cy:ncy});
                    path1[1][1] = ncx;
                    path1[1][2] = ncy;
                    lines[0].attr({path: path1});
                    updateValues(0,(ncx-p)/(w-2*p),1-(ncy-p)/(h-2*p));
                }
                
                controls[1].update = function(ncx,ncy) {
                    this.attr({cx:ncx, cy:ncy});
                    path2[1][1] = ncx;
                    path2[1][2] = ncy;
                    lines[1].attr({path: path2});
                    updateValues(1,(ncx-p)/(w-2*p),1-(ncy-p)/(h-2*p));
                }
                
                controls.drag(
                    function(dx, dy) {
                        var ncx = (this.curx || this.attr("cx")) + dx - (this.dx || 0);
                        var ncy = (this.cury || this.attr("cy")) + dy - (this.dy || 0);
                        
                        this.curx = ncx;
                        this.cury = ncy;
                        
                        if(ncx>(w-p)) ncx = w-p;
                        if(ncx<p) ncx = p;
                        if(ncy>(h-p)) ncy = h-p;
                        if(ncy<p) ncy = p;
                        
                        this.update(ncx,ncy);
                        
                        this.dx = dx;
                        this.dy = dy;
                    },
                    function() {
                        this.curx = this.attr("cx");
                        this.cury = this.attr("cy");
                        
                        this.dx = 0;
                        this.dy = 0;
                    }
                );
            }
            
        </script>
    </head>
    <body>
        <section>
            <h1>jquery.easie.js</h1>
            
            <p>Css3-like easing functions  jQuery</p>
            
            <ul>
                <li>Tweak the shape of easings</li>
                <li>Compatible with Css3 easings</li>
                <li>Small (less than 2kB minified)</li>
                <li>Fast (uses lookup tables)</li>
            </ul>
            
            <div class="codeBox">
                
                <p>Select easing</p>
                
                <select id="easingSelector"></select>
                
                <p>jQuery.easie code</p>
                
                <div class="code" id="easieCode"></div>
                
                <p>Css3 code</p>
                
                <div class="code" id="cssCode"></div>
            </div>
            
            <div id="graph">
                
            </div>
            
            
        </section>
    </body>
</html>